---

// import { Picture } from '@astrojs/image/components';

import { BLOG } from '~/config.mjs';
import type { Post } from '~/types';

import { getPermalink } from '~/utils/permalinks';
import { findImage } from '~/utils/images';

export interface Props {
  post: Post;
}

const { post } = Astro.props;
const image = await findImage(post.image);

const link = !BLOG?.post?.disabled ? getPermalink(post.permalink, 'post') : '';
---

<a href={link ?? 'javascript:void(0)'} class="block transition-transform duration-300 hover:scale-105">
  <article class="relative text-white p-6 h-90 flex flex-col rounded-lg shadow-lg border-2 overflow-hidden">
    {image && (
      <div class="absolute inset-0 z-0">
        <img src={image.src} alt={post.title} class="w-full h-90 object-cover opacity-90" />
        <div class="absolute inset-0 bg-[#5c603c]/10"></div>
      </div>
    )}
  </article>
</a>
